{"ast":null,"code":"export class OpportunityEngineService {\n  calculate(players) {\n    const totalBat = players.reduce((s, p) => s + p.ballsFaced * this.posWeight(p.battingPosition), 0);\n    const totalBowl = players.reduce((s, p) => s + p.ballsBowled, 0);\n    players.forEach(p => {\n      const bat = totalBat ? p.ballsFaced * this.posWeight(p.battingPosition) / totalBat : 0;\n      const bowl = totalBowl ? p.ballsBowled / totalBowl : 0;\n      p.opportunityScore = bat * 0.5 + bowl * 0.5;\n    });\n    return players;\n  }\n  posWeight(pos) {\n    if (pos <= 2) return 1;\n    if (pos <= 4) return 0.9;\n    if (pos <= 6) return 0.8;\n    if (pos <= 8) return 0.65;\n    return 0.5;\n  }\n}","map":{"version":3,"names":["OpportunityEngineService","calculate","players","totalBat","reduce","s","p","ballsFaced","posWeight","battingPosition","totalBowl","ballsBowled","forEach","bat","bowl","opportunityScore","pos"],"sources":["C:\\Users\\yash3\\Downloads\\cricket-fee-distributor-v2\\src\\app\\services\\opportunity-engine.service.ts"],"sourcesContent":["import { Player } from '../models/player.model';\n\nexport class OpportunityEngineService {\n  calculate(players: Player[]): Player[] {\n    const totalBat = players.reduce(\n      (s,p)=>s+p.ballsFaced*this.posWeight(p.battingPosition),0);\n    const totalBowl = players.reduce((s,p)=>s+p.ballsBowled,0);\n\n    players.forEach(p=>{\n      const bat = totalBat ? (p.ballsFaced*this.posWeight(p.battingPosition))/totalBat : 0;\n      const bowl = totalBowl ? p.ballsBowled/totalBowl : 0;\n      p.opportunityScore = bat*0.5 + bowl*0.5;\n    });\n    return players;\n  }\n\n  private posWeight(pos:number):number{\n    if(pos<=2) return 1;\n    if(pos<=4) return 0.9;\n    if(pos<=6) return 0.8;\n    if(pos<=8) return 0.65;\n    return 0.5;\n  }\n}"],"mappings":"AAEA,OAAM,MAAOA,wBAAwB;EACnCC,SAASA,CAACC,OAAiB;IACzB,MAAMC,QAAQ,GAAGD,OAAO,CAACE,MAAM,CAC7B,CAACC,CAAC,EAACC,CAAC,KAAGD,CAAC,GAACC,CAAC,CAACC,UAAU,GAAC,IAAI,CAACC,SAAS,CAACF,CAAC,CAACG,eAAe,CAAC,EAAC,CAAC,CAAC;IAC5D,MAAMC,SAAS,GAAGR,OAAO,CAACE,MAAM,CAAC,CAACC,CAAC,EAACC,CAAC,KAAGD,CAAC,GAACC,CAAC,CAACK,WAAW,EAAC,CAAC,CAAC;IAE1DT,OAAO,CAACU,OAAO,CAACN,CAAC,IAAE;MACjB,MAAMO,GAAG,GAAGV,QAAQ,GAAIG,CAAC,CAACC,UAAU,GAAC,IAAI,CAACC,SAAS,CAACF,CAAC,CAACG,eAAe,CAAC,GAAEN,QAAQ,GAAG,CAAC;MACpF,MAAMW,IAAI,GAAGJ,SAAS,GAAGJ,CAAC,CAACK,WAAW,GAACD,SAAS,GAAG,CAAC;MACpDJ,CAAC,CAACS,gBAAgB,GAAGF,GAAG,GAAC,GAAG,GAAGC,IAAI,GAAC,GAAG;IACzC,CAAC,CAAC;IACF,OAAOZ,OAAO;EAChB;EAEQM,SAASA,CAACQ,GAAU;IAC1B,IAAGA,GAAG,IAAE,CAAC,EAAE,OAAO,CAAC;IACnB,IAAGA,GAAG,IAAE,CAAC,EAAE,OAAO,GAAG;IACrB,IAAGA,GAAG,IAAE,CAAC,EAAE,OAAO,GAAG;IACrB,IAAGA,GAAG,IAAE,CAAC,EAAE,OAAO,IAAI;IACtB,OAAO,GAAG;EACZ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}