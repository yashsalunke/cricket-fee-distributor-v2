{"ast":null,"code":"export class OpportunityEngineService {\n  calculate(players) {\n    const totalBat = players.reduce((s, p) => s + p.ballsFaced * this.posWeight(p.battingPosition), 0);\n    const totalBowl = players.reduce((s, p) => s + p.ballsBowled, 0);\n    players.forEach(p => {\n      const bat = totalBat ? p.ballsFaced * this.posWeight(p.battingPosition) / totalBat : 0;\n      const bowl = totalBowl ? p.ballsBowled / totalBowl : 0;\n      p.opportunityScore = bat * 0.5 + bowl * 0.5;\n    });\n    return players;\n  }\n  posWeight(pos) {\n    if (pos <= 2) return 1;\n    if (pos <= 4) return 0.9;\n    if (pos <= 6) return 0.8;\n    if (pos <= 8) return 0.65;\n    return 0.5;\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}