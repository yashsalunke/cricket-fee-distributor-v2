{"ast":null,"code":"import { OpportunityEngineService } from './services/opportunity-engine.service';\nimport { ContributionCalculatorService } from './services/contribution-calculator.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./services/opportunity-engine.service\";\nimport * as i2 from \"./services/contribution-calculator.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction AppComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"h3\");\n    i0.ɵɵtext(2, \"Step 1: Paste Scorecards\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"label\");\n    i0.ɵɵtext(4, \"Innings 1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"textarea\", 2);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AppComponent_div_0_Template_textarea_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.innings1, $event) || (ctx_r1.innings1 = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"label\");\n    i0.ɵɵtext(7, \"Innings 2\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"textarea\", 2);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AppComponent_div_0_Template_textarea_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.innings2, $event) || (ctx_r1.innings2 = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_0_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.detectTeams());\n    });\n    i0.ɵɵtext(10, \"Next\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.innings1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.innings2);\n  }\n}\nfunction AppComponent_div_1_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const t_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", t_r4);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(t_r4);\n  }\n}\nfunction AppComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"h3\");\n    i0.ɵɵtext(2, \"Step 2: Select Team & Amount\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"label\");\n    i0.ɵɵtext(4, \"Your Team\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"select\", 4);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AppComponent_div_1_Template_select_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.selectedTeam, $event) || (ctx_r1.selectedTeam = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵtemplate(6, AppComponent_div_1_option_6_Template, 2, 2, \"option\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"label\");\n    i0.ɵɵtext(8, \"Total Amount\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"input\", 6);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AppComponent_div_1_Template_input_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.amount, $event) || (ctx_r1.amount = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_1_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.calculate());\n    });\n    i0.ɵɵtext(11, \"Calculate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.selectedTeam);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.teams);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.amount);\n  }\n}\nfunction AppComponent_div_2_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"number\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const p_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r5.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r5.ballsFaced);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r5.ballsBowled);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(9, 5, p_r5.finalPercent, \"1.1-1\"), \"%\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\\u20B9\", i0.ɵɵpipeBind2(12, 8, p_r5.amount, \"1.0-0\"), \"\");\n  }\n}\nfunction AppComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"h3\");\n    i0.ɵɵtext(2, \"Final Contribution\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"table\")(4, \"tr\")(5, \"th\");\n    i0.ɵɵtext(6, \"Player\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Balls Bat\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Balls Bowl\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"%\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14, \"Amount\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(15, AppComponent_div_2_tr_15_Template, 13, 11, \"tr\", 8);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.players);\n  }\n}\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(opp, calc) {\n      this.opp = opp;\n      this.calc = calc;\n      this.step = 1;\n      this.innings1 = '';\n      this.innings2 = '';\n      this.teams = [];\n      this.selectedTeam = '';\n      this.amount = 2000;\n      this.players = [];\n    }\n    detectTeams() {\n      const text = this.innings1 + this.innings2;\n      const matches = text.match(/\\(([^)]+)\\)/g) || [];\n      this.teams = [...new Set(matches.map(m => m.replace(/[()]/g, '')))];\n      this.step = 2;\n    }\n    calculate() {\n      const merged = [...this.parse(this.innings1), ...this.parse(this.innings2)];\n      const map = {};\n      merged.forEach(p => {\n        if (!map[p.name]) map[p.name] = {\n          ...p\n        };else {\n          map[p.name].ballsFaced += p.ballsFaced;\n          map[p.name].ballsBowled += p.ballsBowled;\n          map[p.name].runs += p.runs;\n          map[p.name].wickets += p.wickets;\n        }\n      });\n      this.players = Object.values(map);\n      this.players = this.opp.calculate(this.players);\n      this.players = this.calc.calculate(this.players, this.amount);\n      this.step = 3;\n    }\n    parse(text) {\n      const lines = text.split('\\n').map(l => l.trim()).filter(Boolean);\n      const players = [];\n      let bat = false,\n        bowl = false;\n      for (const l of lines) {\n        if (l.startsWith('No Batsman')) {\n          bat = true;\n          bowl = false;\n          continue;\n        }\n        if (l.startsWith('No Bowler')) {\n          bowl = true;\n          bat = false;\n          continue;\n        }\n        if (l.startsWith('Extras')) bat = false;\n        if (bat && /^\\d+\\s/.test(l)) {\n          const p = l.split(/\\s+/);\n          players.push({\n            name: p[1].replace(/\\(.+?\\)/g, ''),\n            battingPosition: +p[0],\n            ballsFaced: +p[p.length - 5],\n            runs: +p[p.length - 6],\n            strikeRate: +p[p.length - 1],\n            ballsBowled: 0,\n            wickets: 0,\n            economy: 0\n          });\n        }\n        if (bowl && /^\\d+\\s/.test(l)) {\n          const p = l.split(/\\s+/);\n          const name = p[1];\n          const overs = p[p.length - 8];\n          const wickets = +p[p.length - 5];\n          const eco = +p[p.length - 1];\n          const balls = this.toBalls(overs);\n          const pl = players.find(x => name.includes(x.name));\n          if (pl) {\n            pl.ballsBowled = balls;\n            pl.wickets = wickets;\n            pl.economy = eco;\n          }\n        }\n      }\n      return players;\n    }\n    toBalls(o) {\n      if (!o.includes('.')) return +o * 6;\n      const [x, y] = o.split('.');\n      return +x * 6 + +y;\n    }\n    static {\n      this.ɵfac = function AppComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AppComponent)(i0.ɵɵdirectiveInject(i1.OpportunityEngineService), i0.ɵɵdirectiveInject(i2.ContributionCalculatorService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AppComponent,\n        selectors: [[\"app-root\"]],\n        features: [i0.ɵɵProvidersFeature([OpportunityEngineService, ContributionCalculatorService])],\n        decls: 3,\n        vars: 3,\n        consts: [[\"class\", \"step\", 4, \"ngIf\"], [1, \"step\"], [\"rows\", \"8\", 3, \"ngModelChange\", \"ngModel\"], [3, \"click\"], [3, \"ngModelChange\", \"ngModel\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"number\", 3, \"ngModelChange\", \"ngModel\"], [3, \"value\"], [4, \"ngFor\", \"ngForOf\"]],\n        template: function AppComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵtemplate(0, AppComponent_div_0_Template, 11, 2, \"div\", 0)(1, AppComponent_div_1_Template, 12, 3, \"div\", 0)(2, AppComponent_div_2_Template, 16, 1, \"div\", 0);\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"ngIf\", ctx.step === 1);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.step === 2);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.step === 3);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel, i3.DecimalPipe]\n      });\n    }\n  }\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}