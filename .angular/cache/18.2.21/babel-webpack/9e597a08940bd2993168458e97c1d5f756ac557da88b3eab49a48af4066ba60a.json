{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { OpportunityEngineService } from '../services/opportunity-engine.service';\nimport { ContributionCalculatorService } from '../services/contribution-calculator.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/opportunity-engine.service\";\nimport * as i2 from \"../services/contribution-calculator.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction CalculatorComponent_div_19_tr_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵpipe(17, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"td\");\n    i0.ɵɵtext(19);\n    i0.ɵɵpipe(20, \"number\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const p_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r1.ballsFaced);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r1.runs);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r1.strikeRate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r1.ballsBowled);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r1.wickets);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r1.economy);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(17, 9, p_r1.finalPercent, \"1.1-1\"), \"%\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\\u20B9\", i0.ɵɵpipeBind2(20, 12, p_r1.amount, \"1.0-0\"), \"\");\n  }\n}\nfunction CalculatorComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"h3\");\n    i0.ɵɵtext(2, \"Fee Distribution Results\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"table\")(4, \"thead\")(5, \"tr\")(6, \"th\");\n    i0.ɵɵtext(7, \"Player\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Balls Bat\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Runs\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"SR\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"Balls Bowl\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\");\n    i0.ɵɵtext(17, \"Wickets\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"th\");\n    i0.ɵɵtext(19, \"Eco\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"th\");\n    i0.ɵɵtext(21, \"%\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"th\");\n    i0.ɵɵtext(23, \"Amount\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(24, \"tbody\");\n    i0.ɵɵtemplate(25, CalculatorComponent_div_19_tr_25_Template, 21, 15, \"tr\", 13);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(25);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.players);\n  }\n}\nexport let CalculatorComponent = /*#__PURE__*/(() => {\n  class CalculatorComponent {\n    constructor(opp, calc) {\n      this.opp = opp;\n      this.calc = calc;\n      this.step = 1;\n      this.battingText = '';\n      this.bowlingText = '';\n      this.amount = 2000;\n      this.players = [];\n    }\n    calculate() {\n      const battingPlayers = this.parseBatting(this.battingText);\n      const bowlingStats = this.parseBowling(this.bowlingText);\n      const playerMap = {};\n      // Add batting players\n      battingPlayers.forEach(p => {\n        playerMap[p.name] = {\n          ...p\n        };\n      });\n      // Add or update with bowling stats\n      bowlingStats.forEach(stat => {\n        if (playerMap[stat.name]) {\n          playerMap[stat.name].ballsBowled = stat.ballsBowled;\n          playerMap[stat.name].wickets = stat.wickets;\n          playerMap[stat.name].economy = stat.economy;\n        } else {\n          // Pure bowler\n          playerMap[stat.name] = {\n            name: stat.name,\n            battingPosition: 12,\n            // arbitrary high number\n            ballsFaced: 0,\n            runs: 0,\n            strikeRate: 0,\n            ballsBowled: stat.ballsBowled,\n            wickets: stat.wickets,\n            economy: stat.economy\n          };\n        }\n      });\n      this.players = Object.values(playerMap);\n      this.players = this.opp.calculate(this.players);\n      this.players = this.calc.calculate(this.players, this.amount);\n      this.step = 2;\n    }\n    parseBatting(text) {\n      const lines = text.split('\\n').map(l => l.trim()).filter(Boolean);\n      const players = [];\n      let bat = false;\n      for (const l of lines) {\n        if (l.startsWith('No Batsman')) {\n          bat = true;\n          continue;\n        }\n        if (l.startsWith('Extras')) bat = false;\n        if (bat && /^\\d+\\s/.test(l)) {\n          const p = l.split(/\\s+/);\n          let statusIndex = p.findIndex(s => ['c', 'b', 'not', 'run', 'lbw', 'st', 'hit', 'c&b', 'stumped', 'bowled', 'caught'].includes(s));\n          if (statusIndex === -1) statusIndex = p.length - 6;\n          const name = p.slice(1, statusIndex).join(' ').replace(/\\((RHB|LHB|AMB)\\)/g, '').trim();\n          players.push({\n            name: name,\n            battingPosition: +p[0],\n            ballsFaced: +p[p.length - 5],\n            runs: +p[p.length - 6],\n            strikeRate: +p[p.length - 1],\n            ballsBowled: 0,\n            wickets: 0,\n            economy: 0\n          });\n        }\n      }\n      return players;\n    }\n    parseBowling(text) {\n      const lines = text.split('\\n').map(l => l.trim()).filter(Boolean);\n      const stats = [];\n      let bowl = false;\n      for (const l of lines) {\n        if (l.startsWith('No Bowler')) {\n          bowl = true;\n          continue;\n        }\n        if (bowl && /^\\d+\\s/.test(l)) {\n          const p = l.split(/\\s+/);\n          let nameEnd = 1;\n          for (let i = 1; i < p.length; i++) {\n            if (/^\\d+(\\.\\d+)?$/.test(p[i])) {\n              nameEnd = i;\n              break;\n            }\n          }\n          const name = p.slice(1, nameEnd).join(' ');\n          const overs = p[nameEnd];\n          const wickets = +p[nameEnd + 3];\n          const eco = +p[p.length - 1];\n          const balls = this.toBalls(overs);\n          stats.push({\n            name,\n            ballsBowled: balls,\n            wickets,\n            economy: eco\n          });\n        }\n      }\n      return stats;\n    }\n    toBalls(o) {\n      if (!o.includes('.')) return +o * 6;\n      const [x, y] = o.split('.');\n      return +x * 6 + +y;\n    }\n    static {\n      this.ɵfac = function CalculatorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || CalculatorComponent)(i0.ɵɵdirectiveInject(i1.OpportunityEngineService), i0.ɵɵdirectiveInject(i2.ContributionCalculatorService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CalculatorComponent,\n        selectors: [[\"app-calculator\"]],\n        standalone: true,\n        features: [i0.ɵɵProvidersFeature([OpportunityEngineService, ContributionCalculatorService]), i0.ɵɵStandaloneFeature],\n        decls: 20,\n        vars: 4,\n        consts: [[1, \"form-section\"], [1, \"form-row\"], [1, \"form-group\"], [\"for\", \"batting\"], [\"id\", \"batting\", \"placeholder\", \"Paste batting scorecard here...\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"bowling\"], [\"id\", \"bowling\", \"placeholder\", \"Paste bowling scorecard here...\", 3, \"ngModelChange\", \"ngModel\"], [1, \"form-group\", \"full-width\"], [\"for\", \"amount\"], [\"id\", \"amount\", \"type\", \"number\", \"placeholder\", \"Enter total amount\", 3, \"ngModelChange\", \"ngModel\"], [1, \"btn\", 3, \"click\"], [\"class\", \"results-section\", 4, \"ngIf\"], [1, \"results-section\"], [4, \"ngFor\", \"ngForOf\"]],\n        template: function CalculatorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"label\", 3);\n            i0.ɵɵtext(4, \"Batting Stats\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"textarea\", 4);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function CalculatorComponent_Template_textarea_ngModelChange_5_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.battingText, $event) || (ctx.battingText = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"div\", 2)(7, \"label\", 5);\n            i0.ɵɵtext(8, \"Bowling Stats\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"textarea\", 6);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function CalculatorComponent_Template_textarea_ngModelChange_9_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.bowlingText, $event) || (ctx.bowlingText = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(10, \"div\", 1)(11, \"div\", 7)(12, \"label\", 8);\n            i0.ɵɵtext(13, \"Total Amount (\\u20B9)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"input\", 9);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function CalculatorComponent_Template_input_ngModelChange_14_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.amount, $event) || (ctx.amount = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(15, \"br\")(16, \"br\");\n            i0.ɵɵelementStart(17, \"button\", 10);\n            i0.ɵɵlistener(\"click\", function CalculatorComponent_Template_button_click_17_listener() {\n              return ctx.calculate();\n            });\n            i0.ɵɵtext(18, \"Calculate Distribution\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵtemplate(19, CalculatorComponent_div_19_Template, 26, 1, \"div\", 11);\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.battingText);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.bowlingText);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.amount);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngIf\", ctx.step === 2);\n          }\n        },\n        dependencies: [CommonModule, i3.NgForOf, i3.NgIf, i3.DecimalPipe, FormsModule, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.NgModel]\n      });\n    }\n  }\n  return CalculatorComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}